<div class="container">
  <div class="row">
    <div class="col-md-2"></div>
    <div class="col-md-4">
      <div id="new-event" class="card" style="width: 18rem;">
        <h2 class="card-title">Itinerary</h2>
        <ul class="list-group list-group-flush">
          {{#each event}}
            <div>
              <li class="newEvent">{{id}}.{{event_name}}</li>
              <li class="newEvent">{{id}}.{{event_address}}</li>
              <li class="newEvent">{{id}}.{{event_date}}</li>
              <button id="remove-btn" class="remove-status" data-id="{{id}}"><Center>Remove</Center>!</button>
            </div>
          {{/each}}
        </ul>
      </div>
    </div>
    <div class="col-md-2"></div>
  </div>

  <div class="row">
    <div class="col-md-3"></div>
    <div class="col-md-3">
      <div id="addEvent" class="card" style="width: 18rem;">
        <div class="card-body">
          <h2 class="card-title">Add to Itinerary</h2>
          
          <form class="create-form">
            <div class="form-group">
              <label for="event">Event Name:</label>
              <input type="text" id="event" name="event_name">
            </div>
            <br>
            <button type="submit">Add Itinery</button>
          </form>
        </div>
      </div>
    </div>
    <div class="col-md-3"></div>
  </div
</div>

<script>
$(function() {
  $(".remove-status").on("click", function(event) {
    let id = $(this).data("id");

    let newStatusState = {
      active: false
    };

    // Send the PUT request.
    $.ajax("/api/event/" + id, {
      type: "PUT",
      data: newStatusState
    }).then(
      function() {
        console.log("event remove");
        // Reload the page to get the updated list
        location.reload();
      }
    );
  });

  $(".create-form").on("submit", function(event) {
    // Make sure to preventDefault on a submit event.
    event.preventDefault();

      let newEvent = {
        event_name: $("#event").val().trim(),
        // event_date: $("#event").val().trim(),
        // event_address: $("#event").val().trim(),
        active: true
      };

    // Send the POST request.
    $.ajax("/api/event/", {
      type: "POST",
      data: newevent
    }).then(
      function() {
        console.log("created new event");
        // Reload the page to get the updated list
        location.reload();
      }
    );
  });
});
</script>